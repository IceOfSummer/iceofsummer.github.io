(()=>{const n="toc-level-",l="$toTopHeight";let u=0;class c{name;_className;link;_level;element;constructor(e,t){this.element=e,this.name=15<=e.textContent.length?e.textContent.substring(0,15)+"...":e.textContent,this._className=n+t,this.link="#"+e.id,this._level=t}isAboveWindow(){return e(this.element)>document.documentElement.scrollTop}get className(){return this._className}get level(){return this._level}set level(e){this.className=n+e,this._level=e}}function e(e){var t=e[l];if(t&&t.version===u)return e[l].value;let n=e,i=0;for(;i+=n.offsetTop,n=n.offsetParent;);return e[l]={value:i,version:u},i}window.addEventListener("resize",()=>{u++});const v=Vue.defineComponent({name:"TopicItem",props:{item:c,visible:Boolean,index:Number},emits:{linkClick:Number},setup(e,{emit:t}){const n=()=>{t("linkClick",e.index)};return()=>h("div",{class:[e.visible?"toc-item-active":"toc-item-inactive","toc-item",e.item.className]},[h("a",{on:{click:n},attrs:{href:e.item.link}},[e.item.name])])}});var t=Vue.defineComponent({components:{TopicItem:v},name:"toc-component",setup(){const l=Vue.ref([]),i=Vue.ref(1),t=Vue.ref(),n=Vue.ref("0");let o;function s(){if(!o){let t;for(t=l.value.length-1;0<=t;t--){var n;if(!l.value[t].isAboveWindow()){let e=t+1;l.value[e]?(1===l.value[e].level&&(n=l.value[e+1])&&1!==n.length&&e++,i.value=Math.min(e,l.value.length-1)):i.value=t;break}}-1===t&&(i.value=0)}}function a(){m()}Vue.onMounted(()=>{var e=document.getElementById("main-content");if(e){const i=[];e=e.childNodes;let n=1e3;if(e.forEach(e=>{let t;2!==e.nodeName.length||"H"!==e.nodeName[0]||Number.isNaN(t=Number.parseInt(e.nodeName[1]))||(i.push(new c(e,t)),n=Math.min(n,t))}),l.value=i,1<n){const t=n-1;i.forEach(e=>{e.level-=t})}window.addEventListener("scroll",s),window.addEventListener("resize",a),s(),u++,m()}}),Vue.onUnmounted(()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",a)});const m=()=>{var e;t.value&&(0===t.value.clientHeight&&0<l.value.length?setTimeout(()=>{m()},100):(e=100*(1-t.value.clientHeight/document.documentElement.clientHeight)/2,e=Math.max(e,0),n.value=e+"%"))},r=e=>{o=!0,i.value=e,setTimeout(()=>{o=!1},50)};return()=>h("div",{attrs:{id:"toc"},ref:t,style:{top:n.value}},[h("div",{style:"font-size: 20px;margin: 5px 0"},["目录"]),l.value.map((e,t)=>h(v,{key:e.name,attrs:{item:e,visible:i.value===t,index:t},on:{linkClick:r}}))])}});mixins.toc={components:{"toc-component":t}}})();