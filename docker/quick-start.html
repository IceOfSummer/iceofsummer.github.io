
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8" />
        <title>快速入门 | IceOfSummerの博客</title>
        <meta name="author" content="IceOfSummer" />
        <meta name="description" content="后面一辈子的博客都在这了！" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
        <script src="https://cdn.staticfile.org/vue/3.2.47/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.3.0/css/all.min.css" />
<link rel="stylesheet" href="https://selfb.asia/static/particlex/static/fonts.min.css" />
<script>
  const mixins = {};
  const h = (arg1, arg2, arg3) => {
    if (arg2.attrs) {
      Object.assign(arg2, arg2.attrs)
      Reflect.deleteProperty(arg2, 'attrs')
    }
    if (arg2.on) {
      Object.keys(arg2.on).forEach(key => {
        const head = key.charAt(0).toUpperCase()
        arg2['on' + head  + key.substring(1)] = arg2.on[key]
      })
      Reflect.deleteProperty(arg2, 'on')
    }
    return Vue.h(arg1, arg2, arg3)
  }
</script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.7.0/highlight.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.7.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>



<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

  <script src="/js/lib/toc.js"></script>



  <script src="/js/lib/lazy-load-support.js"></script>


    <meta name="generator" content="Hexo 7.1.1"></head>
    <body>
        <div id="layout">
            <transition name="fade">
            <div id="loading" v-show="loading">
                <div id="loading-circle">
                    <h2>LOADING</h2>
                    <p>加载过慢请开启缓存&ensp;浏览器默认开启</p>
                    <img src="https://selfb.asia/static/particlex/images/loading.gif" />
                </div>
            </div>
            </transition>
            <transition name="into">
            <div id="main" v-show="!loading">
                <nav id="menu" ref="menu">
    <div class="desktop-menu">
        <a class="title" href="/">
            <span>ICEOFSUMMERの博客</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="curtain" v-show="showMenu" @click="showMenu = !showMenu"></div>
        <div class="title" @click="showMenu = !showMenu">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;ICEOFSUMMERの博客</span>
        </div>
        <transition name="slide">
        <div class="items" v-show="showMenu">
            
            <a href="/">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-house fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                </div>
            </a>
            
            <a href="/about">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-id-card fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                </div>
            </a>
            
            <a href="/archives">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-box-archive fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                </div>
            </a>
            
            <a href="/categories">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-bookmark fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                </div>
            </a>
            
            <a href="/tags">
                <div class="item">
                    <div style="min-width: 20px; max-width: 50px; width: 10%">
                        <i class="fa-solid fa-tags fa-fw"></i>
                    </div>
                    <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                </div>
            </a>
            
        </div>
        </transition>
    </div>
</nav>

                <div class="article">
    <div>
        <h1>快速入门</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/4/20
        </span>
        
        <span class="category">
            <a href="/2023/04/20/docker/">
                <span class="icon">
                    <i class="fa-solid fa-bookmark fa-fw"></i>
                </span>
                Docker
            </a>
        </span>
        
        
    </div>
    
    <toc-component></toc-component>
    <div class="content" v-pre id="main-content">
        <h1 id="1-安装和启动"><a href="#1-安装和启动" class="headerlink" title="1. 安装和启动"></a>1. 安装和启动</h1><p><a target="_blank" rel="noopener" href="https://docs.docker.com/engine/install/">Install Docker Engine | Docker Documentation</a></p>
<p>启动命令：</p>
<pre><code class="shell">systemctl start docker
</code></pre>
<p>这个指令类似于启动了一个windows上的后台服务。</p>
<p>关闭命令：</p>
<pre><code class="shell">systemctl stop docker
</code></pre>
<h1 id="2-常用命令"><a href="#2-常用命令" class="headerlink" title="2. 常用命令"></a>2. 常用命令</h1><h2 id="2-1-帮助启动类命令"><a href="#2-1-帮助启动类命令" class="headerlink" title="2.1 帮助启动类命令"></a>2.1 帮助启动类命令</h2><ul>
<li><p>启动：<code>systemctl start docker</code></p>
</li>
<li><p>停止：<code>systemctl stop docker</code></p>
</li>
<li><p>重启：<code>systemctl restart docker</code></p>
</li>
<li><p>查看状态：<code>systemctl status docker</code></p>
</li>
<li><p>开机启动：<code>systemctl enable docker</code></p>
</li>
<li><p>查看概要信息：<code>docker info</code></p>
</li>
<li><p>查看帮助文档：<code>docker --help</code></p>
</li>
</ul>
<h2 id="2-2-镜像命令"><a href="#2-2-镜像命令" class="headerlink" title="2.2 镜像命令"></a>2.2 镜像命令</h2><h3 id="2-2-1-列出本地主机上的镜像"><a href="#2-2-1-列出本地主机上的镜像" class="headerlink" title="2.2.1 列出本地主机上的镜像"></a>2.2.1 列出本地主机上的镜像</h3><pre><code class="shell">docker images
</code></pre>
<p>该命令第一行为5个固定值：</p>
<ul>
<li>REPOSITORY：镜像的仓库源</li>
<li>TAG：镜像的标签版本号</li>
<li>IMAGE ID：镜像ID</li>
<li>CREATED：创建时间</li>
<li>SIZE：镜像大小</li>
</ul>
<p>一般使用<code>RESPOSITORY:TAG</code>来定义不同的镜像，如果不指定TAG，默认为<code>RESPOSITORY:latest</code>。</p>
<p>选项：</p>
<ul>
<li>-a：列出本地所有的镜像(含历史映像层)</li>
<li>-q：只显示镜像ID</li>
</ul>
<h3 id="2-2-2-其它"><a href="#2-2-2-其它" class="headerlink" title="2.2.2 其它"></a>2.2.2 其它</h3><ul>
<li><p>搜索某个镜像：<code>docker search [REPOSITORY]</code></p>
</li>
<li><p>拉取某个镜像：<code>docker pull [REPOSITORY]:[TAG]</code></p>
</li>
<li><p>查看镜像&#x2F;容器&#x2F;数据卷所占用的空间：<code>docker system df</code></p>
</li>
<li><p>删除镜像：<code>docker rmi [IMAGE ID | RESPOSITORY]</code></p>
</li>
<li><p><font color=red>删除所有镜像</font>：<code>docker rmi -f $(docker images -q)</code></p>
</li>
</ul>
<h2 id="2-3-容器命令"><a href="#2-3-容器命令" class="headerlink" title="2.3 容器命令"></a>2.3 容器命令</h2><h3 id="2-3-1-启动容器"><a href="#2-3-1-启动容器" class="headerlink" title="2.3.1 启动容器"></a>2.3.1 启动容器</h3><pre><code class="shell">docker run [OPTIONS] IMAGE [COMMAND][ARG...]
</code></pre>
<p>常用OPTIONS：</p>
<ul>
<li><p>指定容器名称：<code>--name=[NAME]</code></p>
</li>
<li><p>后台运行容器并返回容器ID：<code>-d</code></p>
</li>
<li><p>以交互模式运行容器：<code>-i</code></p>
</li>
<li><p>为容器重新分配一个伪输入终端，通常与<code>-i</code>同时使用：<code>-t</code></p>
</li>
<li><p>指定容器的端口号：<code>-p [hostPort]:[containerPort]</code></p>
</li>
</ul>
<p>例如运行一个Ubuntu：</p>
<pre><code class="shell">docker run -it ubuntu /bin/bash
</code></pre>
<p>启动一个已经停止运行的容器：</p>
<pre><code class="shell">docker start [容器ID]
</code></pre>
<p>重启容器：</p>
<pre><code class="shell">docker restart [容器ID]
</code></pre>
<p>停止容器：</p>
<pre><code class="shell">docker stop [容器ID]
</code></pre>
<p>强制停止容器：</p>
<pre><code class="shell">docker kill [容器ID]
</code></pre>
<p>删除已经停止的容器：</p>
<pre><code class="shell">docker rm [容器ID]
</code></pre>
<h3 id="2-3-2-列出容器"><a href="#2-3-2-列出容器" class="headerlink" title="2.3.2 列出容器"></a>2.3.2 列出容器</h3><p>查看正在运行的容器：</p>
<pre><code class="shell">docker ps
</code></pre>
<p>可用参数：</p>
<ul>
<li>列出所有正在运行的以及历史运行过的容器：<code>-a</code></li>
<li>显示最近创建的容器：<code>-l</code></li>
<li>显示最近n个创建的容器：<code>-n</code></li>
<li>静默模式，只显示容器编号：<code>-q</code></li>
</ul>
<h3 id="2-3-3-其它命令"><a href="#2-3-3-其它命令" class="headerlink" title="2.3.3 其它命令"></a>2.3.3 其它命令</h3><ul>
<li><p>查看容器日志：<code>docker logs [容器ID]</code></p>
</li>
<li><p>查看容器进程占用：<code>docker top</code></p>
</li>
<li><p>重新进入正在运行的容器：</p>
<ul>
<li><code>docker exec -it [容器ID] /bin/bash</code></li>
<li><code>docker attach [容器ID]</code></li>
</ul>
<p>attach直接进入容器启动命令的终端，不会启动新的进程，用exit退出，会导致容器停止</p>
<p>exec是在容器中打开新的终端，并且可以启动新的进程，用exit退出，不会导致容器的停止</p>
</li>
<li><p>从容器拷贝文件到主机上：<code>docker cp [容器ID]:[容器内路径] [目的主机路径]</code></p>
</li>
<li><p>导出容器：<code>docker export [容器ID]</code></p>
<ul>
<li><code>docker export [容器ID] &amp;gt; xxx.tar</code></li>
</ul>
</li>
<li><p>导入容器：<code>docker import</code></p>
<ul>
<li><code>cat xxx.tar | docker import [镜像用户/镜像名]:[版本号]</code></li>
</ul>
</li>
</ul>
<h1 id="3-Docker镜像"><a href="#3-Docker镜像" class="headerlink" title="3. Docker镜像"></a>3. Docker镜像</h1><p>镜像是一种轻量级、可执行的独立软件包，它包含运行某个软件所需的所有内容，我们把应用程序和配置依赖打包好形成一个可交付的运行环境(包括代码、运行时所需要的库、环境变量和配置文件等)，这个打包好的运行环境就是image镜像文件。</p>
<h2 id="3-1-联合文件系统"><a href="#3-1-联合文件系统" class="headerlink" title="3.1 联合文件系统"></a>3.1 联合文件系统</h2><p>UnionFS（联合文件系统)：Union文件系统（UnionFS）是一种分层、轻量级并且高性能的文件系统，它支持对<font color=red>文件系统的修改作为一次提交来一层层的叠加</font>，同时可以将不同目录挂载到同一个虚拟文件系统下(unite several directories into a single virtual filesystem)。Union文件系统是Docker镜像的基础。镜像可以通过分层来进行继承，基于基础镜像（毅有父镜像)，可以制作各种具体的应用镜像。</p>
<p>特性：一次同时加载多个文件系统，但是从外面看起来，只能看到一个文件系统，联合加载会把各层文件系统叠加起来，这样最终的文件系统会包含所有底层的文件和目录。</p>
<h2 id="3-2-制作镜像"><a href="#3-2-制作镜像" class="headerlink" title="3.2 制作镜像"></a>3.2 制作镜像</h2><p>提交一个容器副本：</p>
<pre><code class="shell">docker commit -m=[描述信息] -a=[作者] [容器ID] [要创建的镜像名]:[TAG]
</code></pre>
<p>这个命令会基于某个镜像的基础上创建一个副本。</p>
<p>例如在Ubuntu镜像上安装vim后并制作镜像：</p>
<pre><code class="shell"># 更新包管理工具
$container: apt-get update
# 安装vim
$container: apt-get -y install vim
# 提交
$docker: docker commit -m=&quot;add vim cmd&quot; -a=&quot;xds&quot; 5838857cbbc3 myubuntu:1.1
# 查看制作的镜像
$docker: docker images
</code></pre>
<h1 id="4-容器数据卷"><a href="#4-容器数据卷" class="headerlink" title="4. 容器数据卷"></a>4. 容器数据卷</h1><p>容器数据卷类似于让容器将数据保存到宿主机，以防止容器内的数据丢失（例如容器被误删除）。</p>
<p>卷就是目录或文件，存在于一个或多个容器中，由docker挂载到容器，但不属于联合文件系统，因此能够绕过Union File System提供一些用于持续存储或共享数据的特性:</p>
<p>卷的设计目的就是<font color=red>数据的持久化</font>，完全独立于容器的生存周期，因此Docker不会在容器删除时删除其挂载的数据卷</p>
<p>使用容器数据卷：</p>
<pre><code class="shell">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录 镜像名
</code></pre>
<p>之后在该目录下的修改就能够相互同步。</p>
<p>使用如下指令可以查看具体设置的容器数据卷：</p>
<pre><code class="shell"># docker inspect会显示容器详细信息
docker inspect [容器ID] | grep -A 9 Mounts
</code></pre>
<h2 id="4-1-权限控制"><a href="#4-1-权限控制" class="headerlink" title="4.1 权限控制"></a>4.1 权限控制</h2><p>默认情况下，容器对共享目录下可读可写，但是在某些情况下容器只能读不能写，所以需要权限控制：</p>
<pre><code class="shell">docker run -it --privileged=true -v /宿主机绝对路径目录:/容器内目录:ro 镜像名
</code></pre>
<p>在<code>-v</code>后面添加<code>:ro</code>即可让容器对共享目录只读，如果使用<code>rw</code>表示可读可写，默认为<code>rw</code></p>
<h2 id="4-2-卷的继承和共享"><a href="#4-2-卷的继承和共享" class="headerlink" title="4.2 卷的继承和共享"></a>4.2 卷的继承和共享</h2><p>使用如下指令可以继承某个卷：</p>
<pre><code class="shell">docker run -it --privileged=true --volumes-from [父容器NAME/容器ID] [容器ID]
</code></pre>
<p>即使父容器被关闭或者被删除了，子容器也仍然能够使用这个卷。</p>
<h1 id="5-其它"><a href="#5-其它" class="headerlink" title="5. 其它"></a>5. 其它</h1><h2 id="5-1-安装MySql"><a href="#5-1-安装MySql" class="headerlink" title="5.1 安装MySql"></a>5.1 安装MySql</h2><p>运行指令：</p>
<pre><code class="shell">docker run -d -p 3306:3306 --privileged=true -v /var/log/mysql:/var/log/mysql -v /var/lib/mysql -v /etc/mysql/conf.d:/ect/mysql/conf.d -e MYSQL_ROOT_PASSWORD=123456 --name mysql mysql
</code></pre>
<p>进入配置文件夹夹（&#x2F;var&#x2F;mysql&#x2F;conf.d），添加配置文件（xxx.cnf）：</p>
<pre><code class="text">[client]
default_character_set=utf8
[mysqld]
collation_server=utf8_general_ci
character_set_server=utf8
</code></pre>

    </div>
    
    
    
    
    <div id="comment">
        <div id="giscus-container" class="giscus"></div>
    </div>
    
    
    
    
</div>

                <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2024 IceOfSummerの博客
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;<a target="_blank" rel="noopener" href="https://github.com/IceOfSummer">IceOfSummer</a>
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/IceOfSummer/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>
</footer>

            </div>
            </transition>
            
            <transition name="fade">
            <div id="preview" ref="preview" v-show="previewShow">
                <img id="preview-content" ref="previewContent" />
            </div>
            </transition>
            
        </div>
        <script src="/js/main.js"></script>
        
        
<script
    src="https://giscus.app/client.js"
    data-repo="IceOfSummer/iceofsummer.github.io"
    data-repo-id="R_kgDOJFU7OQ"
    data-category="Announcements"
    data-category-id="DIC_kwDOJFU7Oc4CUyC7"
    data-mapping="title"
    data-strict="0"
    data-reactions-enabled="1"
    data-emit-metadata="0"
    data-input-position="top"
    data-theme="preferred_color_scheme"
    data-lang="zh-CN"
    crossorigin
    async
></script>





        
    </body>
</html>
